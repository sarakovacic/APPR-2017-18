---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
subtitle : "Gozdarstvo v Sloveniji in njenih sosednjih državah"
author: "Sara Kovačič"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex

---

```{r setup, echo=FALSE, results='hide', message=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme

Analizirala bom površino gozdov v Sloveniji skozi čas in podatke primerjala s sosednjimi državami (Avstrijo, Madžarsko, Hrvaško in Italijo). Za Slovenijo bom podrobneje analizirala posek, letni prirastek, zaloge lesa ter število gozdov (in ha) kmetijskih gospodarstev po slovenskih regijah. Med omenjenimi državami bom primerjala število zaposlenih v gozdarstvu skozi čas, glede na stopnjo izobrazbe in spol. V analizo bom vključila tudi tabelo, ki prikazuje delež zaščitenih gozdov v državah. 

Podatkovne vire sem pridobila iz spletnih strani SURS in EUROSTAT in se nahajajo v mapi podatki. Pridobila sem 4 csv tabele in eno oblike htm. 

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE}
source("uvoz/uvozpodatkov.R", encoding = "UTF-8")
```

Uvozila sem podatke v obliki CSV in htm s statističnega urada in EUROSTATA. Podatki so v petih razpredelnicah v obliki *tidy data*.

1. *Površina gozda izbranih držav*
  - `leto` - spremenljivka: leto meritve
  - `drzava` - spremenljivka: ime drzave (neurejen faktor),
  - `povrsina gozda` - meritev: površina gozda (število)

2. *Zaposlitev v gozdarski panogi*
  - 'drzava' - spremenljivka: država meritve
  - 'izobrazba' - spremenljivka: prikazuje izobrazbo zaposlenih v gozdarski panogi
  - 'leto'- spremenljivka: leto meritve
  - 'spol'- spremenljivka: spol zaposlenih v gozdarski panogi
  - 'vrednost' - meritev: prikazuje % zaposlenih v gozdarstvu v državi

3. *Stanje gozdov v Sloveniji*
  - 'leto' - spremenljivka: leto meritve
  - 'povrsina gozda' - meritev 
  - 'letni prirastek' - meritev
  - 'lesna zaloga' - meritev
  - 'posek lesa'- meritev 

4. *Površina gozda v Sloveniji po regijah*
  - 'regija' - spremenljivka: ime regije (neurejen faktor)
  - 'leto' - spremenljivka: leto meritve
  - 'povrsina' - meritev: povrsina gozda v regiji
  - 'stevilo kmetij' - meritev: število kmetij, ki se ukvarja z gozdarstvom v regiji

5. *Zaščita gozda*
  - 'leto' - spremenljivka: leto meritve
  - 'drzava' - spremenljivka: država meritve
  - 'procent zascitenega gozda'- meritev: delež koliko gozda v državi je zaščitenega
  - '1000 Ha'- meritev: površina zaščitenega gozda v državi



Spodnji graf prikazuje porazdelitev števila naselij v občinah.

```{r histogram, echo=FALSE, message=FALSE, fig.align='center', fig.cap='Histogram števila naselij v občinah'}
ggplot(obcine, aes(x = naselja)) + geom_histogram() +
  ggtitle("Pogostost števila naselij") + xlab("Število naselij") + ylab("Število občin")
```

***

# Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE}
source("vizualizacija/vizualizacija.r", encoding = "UTF-8")
```

Spodnji zemljevid prikazuje povprečno površino gozda po slovenskih regijah

print(zemljevid.regije1) 

***

# Napredna analiza podatkov

```{r analiza, echo=FALSE, message=FALSE}
source("analiza/analiza.r", encoding = "UTF-8")
```

Spodnji graf prikazuje povezavo med številom naselij in površino občine.

```{r graf, echo=FALSE, fig.align='center', fig.cap='Povezava med številom naselij in površino občine'}
ggplot(inner_join(obcine, data.frame(obcina = names(skupine),
                                     skupina = factor(skupine)), by = "obcina")
, aes(x = povrsina, y = naselja, color = skupina, size = prebivalci/1000)) + geom_point() +
  ggtitle("Število naselij glede na površino občine") +
  xlab(expression("Površina (km"^2 * ")")) + ylab("Št. naselij") +
  guides(color = guide_legend(title = "Skupina"),
         size = guide_legend(title = "Prebivalci (* 1000)"))
```

***

```{r shiny, echo = FALSE}
shinyAppDir("shiny", options=list(width="100%", height=600))
```
